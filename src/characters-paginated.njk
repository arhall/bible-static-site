---
pagination:
  data: characters.characters
  size: 100
  alias: characterPage
layout: base.njk
permalink: "/characters/{% if pagination.pageNumber > 0 %}page-{{ pagination.pageNumber + 1 }}/{% else %}{% endif %}"
eleventyComputed:
  allCharacters: "{{ characters.characters }}"
  metadata: "{{ characters.metadata }}"
---

<div class="characters-hero">
  <div class="characters-badge">
    <span class="characters-badge-text">Complete Character Database</span>
  </div>
  <h1 class="characters-title">Biblical Characters</h1>
  <p class="characters-description">Explore the lives and stories of {{ allCharacters | length }} individuals who shaped the narrative of Scripture</p>
  
  <div class="characters-stats">
    <div class="characters-stat">
      <div class="stat-number">{{ allCharacters | length }}</div>
      <div class="stat-label">Characters</div>
      <div class="stat-sublabel">Documented</div>
    </div>
    <div class="characters-stat">
      <div class="stat-number">66</div>
      <div class="stat-label">Books</div>
      <div class="stat-sublabel">Represented</div>
    </div>
  </div>
  
  <div class="character-search-section">
    <div class="search-controls">
      <div class="search-input-group">
        <input type="text" id="character-search" placeholder="Search characters by name, book, or role..." class="search-input">
        <button type="button" id="clear-filters" class="clear-button">Clear</button>
      </div>
      
      <div class="search-filters">
        <div class="filter-group">
          <label for="testament-filter">Testament:</label>
          <select id="testament-filter" class="filter-select">
            <option value="all">All</option>
            <option value="old">Old Testament</option>
            <option value="new">New Testament</option>
            <option value="both">Both Testaments</option>
          </select>
        </div>
        
        <div class="filter-group">
          <label for="significance-filter">Significance:</label>
          <select id="significance-filter" class="filter-select">
            <option value="all">All</option>
            <option value="major">Major</option>
            <option value="prominent">Prominent</option>
            <option value="notable">Notable</option>
            <option value="minor">Minor</option>
          </select>
        </div>
        
        <div class="filter-group">
          <label for="appearances-filter">Min Appearances: <span id="appearances-value">0</span></label>
          <input type="range" id="appearances-filter" min="0" max="100" value="0" class="filter-slider">
        </div>
      </div>
    </div>
    
    <div class="search-results-info">
      <span id="results-count">{{ allCharacters | length }} characters available</span>
    </div>
  </div>
</div>

{% if pagination.pageNumber === 0 %}
<section class="featured-characters-section">
  <div class="section-header">
    <div class="section-badge">
      <span class="section-badge-text">Most Referenced</span>
    </div>
    <h2>Most Frequently Mentioned</h2>
    <p class="section-description">The central figures who appear most often throughout Scripture</p>
  </div>
  
  <div class="featured-characters-grid">
    {% for character in allCharacters | limit(12) %}
      <a href="/characters/{{ character.slug }}/" class="character-card featured">
        <div class="character-badge">
          <span class="rank-indicator">{{ loop.index }}</span>
        </div>
        <div class="character-main">
          <h3 class="character-name">{{ character.name }}</h3>
          <div class="character-stats">
            <div class="stat-item">
              <span class="stat-number">{{ character.totalAppearances }}</span>
              <span class="stat-label">appearances</span>
            </div>
            <div class="stat-divider">•</div>
            <div class="stat-item">
              <span class="stat-number">{{ character.totalBooks }}</span>
              <span class="stat-label">books</span>
            </div>
          </div>
        </div>
        <div class="character-preview">
          {% for book in character.books | slice(0, 2) %}
            <span class="book-tag">{{ book }}</span>
          {% endfor %}
          {% if character.books | length > 2 %}
            <span class="book-more">+{{ character.books | length - 2 }}</span>
          {% endif %}
        </div>
      </a>
    {% endfor %}
  </div>
</section>

<section class="all-characters-section">
  <div class="section-header">
    <h2>All Characters</h2>
    <p class="section-description">Complete alphabetical listing of biblical figures</p>
  </div>
</section>
{% endif %}

<!-- Search Results Container (initially hidden) -->
<div id="search-results" class="characters-listing" style="display: none;"></div>

<div class="characters-listing">
  {% for character in characterPage %}
    <a href="/characters/{{ character.slug }}/" class="character-card standard">
      <div class="character-header">
        <h3 class="character-name">{{ character.name }}</h3>
        <div class="character-significance">
          {% if character.totalAppearances >= 100 %}
            <span class="significance-badge major">Major Figure</span>
          {% elif character.totalAppearances >= 20 %}
            <span class="significance-badge notable">Notable</span>
          {% elif character.totalAppearances >= 5 %}
            <span class="significance-badge regular">Regular</span>
          {% else %}
            <span class="significance-badge minor">Minor</span>
          {% endif %}
        </div>
      </div>
      
      <div class="character-metrics">
        <div class="metric">
          <span class="metric-number">{{ character.totalAppearances }}</span>
          <span class="metric-label">{% if character.totalAppearances == 1 %}appearance{% else %}appearances{% endif %}</span>
        </div>
        <div class="metric-separator">•</div>
        <div class="metric">
          <span class="metric-number">{{ character.totalBooks }}</span>
          <span class="metric-label">{% if character.totalBooks == 1 %}book{% else %}books{% endif %}</span>
        </div>
      </div>
      
      <div class="character-books">
        <div class="books-preview">
          {% for book in character.books | slice(0, 3) %}
            <span class="book-chip">{{ book }}</span>
          {% endfor %}
          {% if character.books | length > 3 %}
            <span class="books-overflow">+{{ character.books | length - 3 }} more</span>
          {% endif %}
        </div>
      </div>
    </a>
  {% endfor %}
</div>

<!-- Pagination Navigation -->
{% if pagination.totalPages > 1 %}
<nav class="pagination" aria-label="Character pages">
  <div class="pagination-info">
    Page {{ pagination.pageNumber + 1 }} of {{ pagination.totalPages }} 
    (showing characters {{ pagination.pageNumber * 100 + 1 }}-{{ (pagination.pageNumber + 1) * 100 | min(allCharacters | length) }})
  </div>
  
  <div class="pagination-links">
    {% if pagination.href.previous %}
      <a href="{{ pagination.href.previous }}" class="pagination-prev">← Previous</a>
    {% endif %}
    
    {% for pageNum in range(0, pagination.totalPages) %}
      {% if pageNum == pagination.pageNumber %}
        <span class="pagination-current">{{ pageNum + 1 }}</span>
      {% elif pageNum < 3 or pageNum > pagination.totalPages - 4 or (pageNum >= pagination.pageNumber - 2 and pageNum <= pagination.pageNumber + 2) %}
        <a href="{% if pageNum == 0 %}/characters/{% else %}/characters/page-{{ pageNum + 1 }}/{% endif %}" class="pagination-link">{{ pageNum + 1 }}</a>
      {% elif pageNum == 3 or pageNum == pagination.totalPages - 4 %}
        <span class="pagination-ellipsis">…</span>
      {% endif %}
    {% endfor %}
    
    {% if pagination.href.next %}
      <a href="{{ pagination.href.next }}" class="pagination-next">Next →</a>
    {% endif %}
  </div>
</nav>
{% endif %}

<!-- Add character data for search -->
<script>
  window.charactersData = {
    characters: {{ allCharacters | dump | safe }},
    metadata: {{ metadata | dump | safe }}
  };
</script>

<!-- Load search functionality -->
<script src="/assets/character-search.js"></script>